<div class="user-profile-container user-menu-container">
    @if (auth.isAuthenticated()) {
    <button class="profile-button" [matMenuTriggerFor]="userMenu" aria-label="Menu utilisateur">
        @if (getUserAvatar(); as avatar) {
        <img [src]="avatar" [alt]="getUserDisplayName()" class="profile-avatar" />
        } @else {
        <div class="profile-avatar-placeholder">
            {{ getUserInitials() }}
        </div>
        }
        <mat-icon class="dropdown-icon">arrow_drop_down</mat-icon>
    </button>

    <mat-menu #userMenu="matMenu" panelClass="user-menu">
        <div class="user-info" mat-menu-item disabled>
            <div class="user-details">
                <div class="user-name">{{ getUserDisplayName() }}</div>
            </div>
        </div>

        <mat-divider></mat-divider>

        <button mat-menu-item (click)="logout()" class="logout-item">
            <mat-icon>logout</mat-icon>
            <span>Se d√©connecter</span>
        </button>
    </mat-menu>
    }
</div>